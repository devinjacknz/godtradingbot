<!DOCTYPE html>
<html>
<head>
    <title>Trading Bot - Backtest Results</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Trading Bot - Backtest Results</h1>
            <nav>
                <a href="/">Home</a>
                <a href="/results">Results</a>
            </nav>
        </header>

        <main>
            <section class="summary">
                <h2>Recent Results</h2>
                <div id="recent-results"></div>
            </section>

            <section class="performance">
                <h2>Performance Overview</h2>
                <div class="chart-container">
                    <canvas id="performance-chart"></canvas>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2024 Trading Bot</p>
        </footer>
    </div>

    <script src="/static/js/main.js"></script>
    <script>
        // Load recent results
        fetch('/api/results')
            .then(response => response.json())
            .then(results => {
                const container = document.getElementById('recent-results');
                results.forEach(result => {
                    const card = document.createElement('div');
                    card.className = 'result-card';
                    card.innerHTML = `
                        <h3>${result.symbol}</h3>
                        <p>Total Return: ${(result.total_return * 100).toFixed(2)}%</p>
                        <p>Win Rate: ${(result.win_rate * 100).toFixed(2)}%</p>
                        <p>Sharpe Ratio: ${result.sharpe_ratio.toFixed(2)}</p>
                        <a href="/result/${result._id}">View Details</a>
                    `;
                    container.appendChild(card);
                });
            });

        // Initialize performance chart
        const ctx = document.getElementById('performance-chart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: [], // Will be populated with dates
                datasets: [{
                    label: 'Portfolio Value',
                    data: [], // Will be populated with values
                    borderColor: 'rgb(75, 192, 192)',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Portfolio Performance'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html> 