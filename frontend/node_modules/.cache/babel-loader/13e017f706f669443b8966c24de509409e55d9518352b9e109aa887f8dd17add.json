{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport apiClient from '../api/client';\n// Token management helpers\nconst setTokens = (access_token, expires_in) => {\n  localStorage.setItem('token', access_token);\n  localStorage.setItem('token_expiry', String(Date.now() + expires_in * 1000));\n};\nconst clearTokens = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('token_expiry');\n};\nexport const useAuthContext = () => {\n  _s();\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(() => {\n    const token = localStorage.getItem('token');\n    return !!token;\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const signup = useCallback(async (email, username, password) => {\n    setIsLoading(true);\n    try {\n      var _response$data;\n      const response = await apiClient.signup({\n        email,\n        username,\n        password\n      });\n      if (response.success && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.access_token) {\n        // Set tokens first\n        setTokens(response.data.access_token, response.data.expires_in);\n\n        // Verify token storage\n        const token = localStorage.getItem('token');\n        const tokenExpiry = localStorage.getItem('token_expiry');\n        if (!token || !tokenExpiry) {\n          throw new Error('Failed to store authentication tokens');\n        }\n\n        // Set user data\n        const newUser = {\n          id: username,\n          email,\n          username,\n          roles: [{\n            name: 'backend_developer',\n            permissions: ['execute_market_maker_trades']\n          }]\n        };\n        setUser(newUser);\n        setIsAuthenticated(true);\n\n        // Ensure state updates are processed before navigation\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // Double check authentication state\n        if (!isAuthenticated || !user) {\n          throw new Error('Failed to set user authentication state');\n        }\n        navigate('/agent-selection');\n        return true;\n      }\n      throw new Error(response.error || 'Signup failed');\n    } catch (error) {\n      console.error('Signup error:', error);\n      // Clear any partial authentication state\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      throw error instanceof Error ? error : new Error('An unexpected error occurred');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [navigate, isAuthenticated, user]);\n  const login = useCallback(async formData => {\n    setIsLoading(true);\n    try {\n      var _response$data2;\n      const response = await apiClient.login({\n        username: formData.email,\n        password: formData.password\n      });\n      if (response.success && (_response$data2 = response.data) !== null && _response$data2 !== void 0 && _response$data2.access_token) {\n        // Set tokens first\n        setTokens(response.data.access_token, response.data.expires_in);\n\n        // Verify token storage\n        const token = localStorage.getItem('token');\n        const tokenExpiry = localStorage.getItem('token_expiry');\n        if (!token || !tokenExpiry) {\n          throw new Error('Failed to store authentication tokens');\n        }\n\n        // Set user data using email as identifier\n        const newUser = {\n          id: formData.email,\n          email: formData.email,\n          username: formData.email.split('@')[0],\n          roles: [{\n            name: 'backend_developer',\n            permissions: ['execute_market_maker_trades']\n          }]\n        };\n        setUser(newUser);\n        setIsAuthenticated(true);\n\n        // Ensure state updates are processed before navigation\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // Double check authentication state\n        if (!isAuthenticated || !user) {\n          throw new Error('Failed to set user authentication state');\n        }\n        navigate('/agent-selection');\n        return true;\n      }\n      throw new Error(response.error || 'Login failed');\n    } catch (error) {\n      console.error('Login error:', error);\n      // Clear any partial authentication state\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      throw error instanceof Error ? error : new Error('An unexpected error occurred');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [navigate, isAuthenticated, user]);\n\n  // Function to refresh the access token\n  const refreshToken = useCallback(async () => {\n    try {\n      var _response$data3;\n      const response = await apiClient.refreshToken();\n      if (response.success && (_response$data3 = response.data) !== null && _response$data3 !== void 0 && _response$data3.access_token) {\n        // Set tokens first\n        setTokens(response.data.access_token, response.data.expires_in);\n\n        // Verify token storage\n        const token = localStorage.getItem('token');\n        const tokenExpiry = localStorage.getItem('token_expiry');\n        if (!token || !tokenExpiry) {\n          console.error('Failed to store refreshed tokens');\n          clearTokens();\n          setUser(null);\n          setIsAuthenticated(false);\n          return false;\n        }\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      // Clear any partial authentication state\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      return false;\n    }\n  }, []);\n  const logout = useCallback(async () => {\n    try {\n      await apiClient.logout();\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      navigate('/login');\n    }\n  }, [navigate]);\n\n  // Add token expiry check effect\n  useEffect(() => {\n    const checkTokenExpiry = async () => {\n      const tokenExpiry = localStorage.getItem('token_expiry');\n      if (!tokenExpiry) {\n        await logout();\n        return;\n      }\n      const expiryTime = parseInt(tokenExpiry);\n      // Refresh token if it expires in less than 5 minutes\n      if (Date.now() + 5 * 60 * 1000 >= expiryTime) {\n        const success = await refreshToken();\n        if (!success) {\n          await logout();\n        }\n      }\n    };\n\n    // Initial check\n    checkTokenExpiry();\n\n    // Check every 4 minutes\n    const interval = setInterval(checkTokenExpiry, 4 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, [refreshToken, logout]);\n  return {\n    user,\n    isAuthenticated,\n    isLoading,\n    signup,\n    login,\n    logout,\n    refreshToken\n  };\n};\n_s(useAuthContext, \"0+3W/cuePhe6+SMEcfkfrVFfKzA=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["useState","useCallback","useEffect","useNavigate","apiClient","setTokens","access_token","expires_in","localStorage","setItem","String","Date","now","clearTokens","removeItem","useAuthContext","_s","navigate","user","setUser","isAuthenticated","setIsAuthenticated","token","getItem","isLoading","setIsLoading","signup","email","username","password","_response$data","response","success","data","tokenExpiry","Error","newUser","id","roles","name","permissions","Promise","resolve","setTimeout","error","console","login","formData","_response$data2","split","refreshToken","_response$data3","logout","checkTokenExpiry","expiryTime","parseInt","interval","setInterval","clearInterval"],"sources":["/home/ubuntu/repos/tradingbot/src/frontend/src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport apiClient from '../api/client';\n\nexport interface User {\n  id: string;\n  email: string;\n  username: string;\n  roles: Array<{\n    name: string;\n    permissions: string[];\n  }>;\n}\n\nexport interface AuthContextType {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  signup: (email: string, username: string, password: string) => Promise<boolean>;\n  login: (formData: { email: string; password: string }) => Promise<boolean>;\n  logout: () => Promise<void>;\n  refreshToken: () => Promise<boolean>;\n}\n\n// Token management helpers\nconst setTokens = (access_token: string, expires_in: number) => {\n  localStorage.setItem('token', access_token);\n  localStorage.setItem('token_expiry', String(Date.now() + (expires_in * 1000)));\n};\n\nconst clearTokens = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('token_expiry');\n};\n\nexport const useAuthContext = (): AuthContextType => {\n  const navigate = useNavigate();\n  const [user, setUser] = useState<User | null>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(() => {\n    const token = localStorage.getItem('token');\n    return !!token;\n  });\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  const signup = useCallback(async (email: string, username: string, password: string) => {\n    setIsLoading(true);\n    try {\n      const response = await apiClient.signup({ email, username, password });\n      if (response.success && response.data?.access_token) {\n        // Set tokens first\n        setTokens(response.data.access_token, response.data.expires_in);\n        \n        // Verify token storage\n        const token = localStorage.getItem('token');\n        const tokenExpiry = localStorage.getItem('token_expiry');\n        \n        if (!token || !tokenExpiry) {\n          throw new Error('Failed to store authentication tokens');\n        }\n        \n        // Set user data\n        const newUser: User = {\n          id: username,\n          email,\n          username,\n          roles: [{ name: 'backend_developer', permissions: ['execute_market_maker_trades'] }]\n        };\n        setUser(newUser);\n        setIsAuthenticated(true);\n        \n        // Ensure state updates are processed before navigation\n        await new Promise(resolve => setTimeout(resolve, 100));\n        \n        // Double check authentication state\n        if (!isAuthenticated || !user) {\n          throw new Error('Failed to set user authentication state');\n        }\n        \n        navigate('/agent-selection');\n        return true;\n      }\n      throw new Error(response.error || 'Signup failed');\n    } catch (error) {\n      console.error('Signup error:', error);\n      // Clear any partial authentication state\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      throw error instanceof Error ? error : new Error('An unexpected error occurred');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [navigate, isAuthenticated, user]);\n\n  const login = useCallback(async (formData: { email: string; password: string }) => {\n    setIsLoading(true);\n    try {\n      const response = await apiClient.login({ username: formData.email, password: formData.password });\n      if (response.success && response.data?.access_token) {\n        // Set tokens first\n        setTokens(response.data.access_token, response.data.expires_in);\n        \n        // Verify token storage\n        const token = localStorage.getItem('token');\n        const tokenExpiry = localStorage.getItem('token_expiry');\n        \n        if (!token || !tokenExpiry) {\n          throw new Error('Failed to store authentication tokens');\n        }\n        \n        // Set user data using email as identifier\n        const newUser: User = {\n          id: formData.email,\n          email: formData.email,\n          username: formData.email.split('@')[0],\n          roles: [{ name: 'backend_developer', permissions: ['execute_market_maker_trades'] }]\n        };\n        setUser(newUser);\n        setIsAuthenticated(true);\n        \n        // Ensure state updates are processed before navigation\n        await new Promise(resolve => setTimeout(resolve, 100));\n        \n        // Double check authentication state\n        if (!isAuthenticated || !user) {\n          throw new Error('Failed to set user authentication state');\n        }\n        \n        navigate('/agent-selection');\n        return true;\n      }\n      throw new Error(response.error || 'Login failed');\n    } catch (error) {\n      console.error('Login error:', error);\n      // Clear any partial authentication state\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      throw error instanceof Error ? error : new Error('An unexpected error occurred');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [navigate, isAuthenticated, user]);\n\n  // Function to refresh the access token\n  const refreshToken = useCallback(async () => {\n    try {\n      const response = await apiClient.refreshToken();\n      if (response.success && response.data?.access_token) {\n        // Set tokens first\n        setTokens(response.data.access_token, response.data.expires_in);\n        \n        // Verify token storage\n        const token = localStorage.getItem('token');\n        const tokenExpiry = localStorage.getItem('token_expiry');\n        \n        if (!token || !tokenExpiry) {\n          console.error('Failed to store refreshed tokens');\n          clearTokens();\n          setUser(null);\n          setIsAuthenticated(false);\n          return false;\n        }\n        \n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      // Clear any partial authentication state\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      return false;\n    }\n  }, []);\n\n  const logout = useCallback(async () => {\n    try {\n      await apiClient.logout();\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      clearTokens();\n      setUser(null);\n      setIsAuthenticated(false);\n      navigate('/login');\n    }\n  }, [navigate]);\n\n  // Add token expiry check effect\n  useEffect(() => {\n    const checkTokenExpiry = async () => {\n      const tokenExpiry = localStorage.getItem('token_expiry');\n      if (!tokenExpiry) {\n        await logout();\n        return;\n      }\n\n      const expiryTime = parseInt(tokenExpiry);\n      // Refresh token if it expires in less than 5 minutes\n      if (Date.now() + 5 * 60 * 1000 >= expiryTime) {\n        const success = await refreshToken();\n        if (!success) {\n          await logout();\n        }\n      }\n    };\n\n    // Initial check\n    checkTokenExpiry();\n    \n    // Check every 4 minutes\n    const interval = setInterval(checkTokenExpiry, 4 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, [refreshToken, logout]);\n\n  return {\n    user,\n    isAuthenticated,\n    isLoading,\n    signup,\n    login,\n    logout,\n    refreshToken,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}