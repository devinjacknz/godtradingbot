{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Paper,Typography,TextField,Button,Alert,Dialog,DialogTitle,DialogContent,DialogActions,IconButton,InputAdornment,CircularProgress}from'@mui/material';import apiClient from'../api/client';import{Visibility as VisibilityIcon,VisibilityOff as VisibilityOffIcon,ContentCopy as CopyIcon}from'@mui/icons-material';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const KeyManagement=()=>{const navigate=useNavigate();const[showPrivateKey,setShowPrivateKey]=useState(false);const[confirmDialogOpen,setConfirmDialogOpen]=useState(false);const[error,setError]=useState(null);const[isSubmitting,setIsSubmitting]=useState(false);const[isLoading,setIsLoading]=useState(true);// These are the provided wallet credentials\nconst walletAddress='Bmy8pkxSMLHTdaCop7urr7b4FPqs3QojVsGuC9Ly4vsU';const privateKey='29f8rVGdqnNAeJPffprmrPzbXnbuhTwRML4EeZYRsG3oyHcXnFpVvSxrC87s3YJy4UqRoYQSpCTNMpBH8q5VkzMx';useEffect(()=>{const validateWallet=async()=>{try{const response=await apiClient.getWalletBalance(walletAddress);if(!response.success){throw new Error(response.error||'Failed to validate wallet');}localStorage.setItem('walletAddress',walletAddress);}catch(err){setError('Failed to validate wallet. Please try again.');}finally{setIsLoading(false);}};validateWallet();},[]);const handleCopyAddress=()=>{navigator.clipboard.writeText(walletAddress);};const handleCopyPrivateKey=()=>{navigator.clipboard.writeText(privateKey);};const handleConfirm=async()=>{setIsSubmitting(true);setError(null);try{const response=await apiClient.confirmWallet(walletAddress);if(response.success){// Store wallet info in localStorage for other components\nlocalStorage.setItem('walletAddress',walletAddress);navigate('/dashboard');}else{setError(response.error||'Failed to confirm key management');}}catch(err){setError('Failed to confirm key management. Please try again.');}finally{setIsSubmitting(false);}};if(isLoading){return/*#__PURE__*/_jsx(Box,{sx:{maxWidth:800,mx:'auto',p:3,display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:800,mx:'auto',p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Key Management\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),/*#__PURE__*/_jsx(Alert,{severity:\"warning\",sx:{mb:3},children:\"Important: Store your private key securely. Never share it with anyone.\"}),/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Wallet Address\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,value:walletAddress,InputProps:{readOnly:true,endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleCopyAddress,children:/*#__PURE__*/_jsx(CopyIcon,{})})})}})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Private Key\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:showPrivateKey?'text':'password',value:privateKey,InputProps:{readOnly:true,endAdornment:/*#__PURE__*/_jsxs(InputAdornment,{position:\"end\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowPrivateKey(!showPrivateKey),children:showPrivateKey?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{})}),/*#__PURE__*/_jsx(IconButton,{onClick:handleCopyPrivateKey,children:/*#__PURE__*/_jsx(CopyIcon,{})})]})}})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",fullWidth:true,onClick:()=>setConfirmDialogOpen(true),children:\"I Have Saved My Keys Securely\"})]}),/*#__PURE__*/_jsxs(Dialog,{open:confirmDialogOpen,onClose:()=>setConfirmDialogOpen(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Confirm Key Management\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Typography,{children:\"Please confirm that you have saved your private key in a secure location. You will not be able to recover it if lost.\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setConfirmDialogOpen(false),disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleConfirm,variant:\"contained\",disabled:isSubmitting,children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Confirm'})]})]})]});};export default KeyManagement;","map":{"version":3,"names":["React","useState","useEffect","Box","Paper","Typography","TextField","Button","Alert","Dialog","DialogTitle","DialogContent","DialogActions","IconButton","InputAdornment","CircularProgress","apiClient","Visibility","VisibilityIcon","VisibilityOff","VisibilityOffIcon","ContentCopy","CopyIcon","useNavigate","jsx","_jsx","jsxs","_jsxs","KeyManagement","navigate","showPrivateKey","setShowPrivateKey","confirmDialogOpen","setConfirmDialogOpen","error","setError","isSubmitting","setIsSubmitting","isLoading","setIsLoading","walletAddress","privateKey","validateWallet","response","getWalletBalance","success","Error","localStorage","setItem","err","handleCopyAddress","navigator","clipboard","writeText","handleCopyPrivateKey","handleConfirm","confirmWallet","sx","maxWidth","mx","p","display","justifyContent","children","variant","gutterBottom","severity","mb","fullWidth","value","InputProps","readOnly","endAdornment","position","onClick","type","size","open","onClose","disabled"],"sources":["/home/ubuntu/repos/tradingbot/src/frontend/src/pages/KeyManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  Alert,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  InputAdornment,\n  CircularProgress,\n} from '@mui/material';\nimport apiClient from '../api/client';\nimport {\n  Visibility as VisibilityIcon,\n  VisibilityOff as VisibilityOffIcon,\n  ContentCopy as CopyIcon,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\n\nconst KeyManagement: React.FC = () => {\n  const navigate = useNavigate();\n  const [showPrivateKey, setShowPrivateKey] = useState(false);\n  const [confirmDialogOpen, setConfirmDialogOpen] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // These are the provided wallet credentials\n  const walletAddress = 'Bmy8pkxSMLHTdaCop7urr7b4FPqs3QojVsGuC9Ly4vsU';\n  const privateKey = '29f8rVGdqnNAeJPffprmrPzbXnbuhTwRML4EeZYRsG3oyHcXnFpVvSxrC87s3YJy4UqRoYQSpCTNMpBH8q5VkzMx';\n\n  useEffect(() => {\n    const validateWallet = async () => {\n      try {\n        const response = await apiClient.getWalletBalance(walletAddress);\n        if (!response.success) {\n          throw new Error(response.error || 'Failed to validate wallet');\n        }\n        localStorage.setItem('walletAddress', walletAddress);\n      } catch (err) {\n        setError('Failed to validate wallet. Please try again.');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    validateWallet();\n  }, []);\n\n  const handleCopyAddress = () => {\n    navigator.clipboard.writeText(walletAddress);\n  };\n\n  const handleCopyPrivateKey = () => {\n    navigator.clipboard.writeText(privateKey);\n  };\n\n  const handleConfirm = async () => {\n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      const response = await apiClient.confirmWallet(walletAddress);\n      \n      if (response.success) {\n        // Store wallet info in localStorage for other components\n        localStorage.setItem('walletAddress', walletAddress);\n        navigate('/dashboard');\n      } else {\n        setError(response.error || 'Failed to confirm key management');\n      }\n    } catch (err) {\n      setError('Failed to confirm key management. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ maxWidth: 800, mx: 'auto', p: 3, display: 'flex', justifyContent: 'center' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ maxWidth: 800, mx: 'auto', p: 3 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Key Management\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n        </Alert>\n      )}\n\n      <Alert severity=\"warning\" sx={{ mb: 3 }}>\n        Important: Store your private key securely. Never share it with anyone.\n      </Alert>\n\n      <Paper sx={{ p: 3 }}>\n        <Box sx={{ mb: 4 }}>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            Wallet Address\n          </Typography>\n          <TextField\n            fullWidth\n            value={walletAddress}\n            InputProps={{\n              readOnly: true,\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton onClick={handleCopyAddress}>\n                    <CopyIcon />\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Box>\n\n        <Box sx={{ mb: 4 }}>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            Private Key\n          </Typography>\n          <TextField\n            fullWidth\n            type={showPrivateKey ? 'text' : 'password'}\n            value={privateKey}\n            InputProps={{\n              readOnly: true,\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton onClick={() => setShowPrivateKey(!showPrivateKey)}>\n                    {showPrivateKey ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                  </IconButton>\n                  <IconButton onClick={handleCopyPrivateKey}>\n                    <CopyIcon />\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Box>\n\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          fullWidth\n          onClick={() => setConfirmDialogOpen(true)}\n        >\n          I Have Saved My Keys Securely\n        </Button>\n      </Paper>\n\n      <Dialog\n        open={confirmDialogOpen}\n        onClose={() => setConfirmDialogOpen(false)}\n      >\n        <DialogTitle>Confirm Key Management</DialogTitle>\n        <DialogContent>\n          <Typography>\n            Please confirm that you have saved your private key in a secure location.\n            You will not be able to recover it if lost.\n          </Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button \n            onClick={() => setConfirmDialogOpen(false)}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </Button>\n          <Button \n            onClick={handleConfirm} \n            variant=\"contained\"\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? <CircularProgress size={24} /> : 'Confirm'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default KeyManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}