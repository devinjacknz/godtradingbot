{"ast":null,"code":"import React,{useState}from'react';import{Box,Card,CardContent,TextField,Button,Typography,Container,Alert,Link}from'@mui/material';import{useAuthContext}from'../hooks/useAuth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Signup=()=>{const{signup}=useAuthContext();const[email,setEmail]=useState('');const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(false);const validateForm=()=>{if(!email){setError('Email is required');return false;}if(!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)){setError('Please enter a valid email address');return false;}if(!username){setError('Username is required');return false;}if(username.length<3){setError('Username must be at least 3 characters long');return false;}if(!password){setError('Password is required');return false;}if(password.length<8){setError('Password must be at least 8 characters long');return false;}return true;};const handleSubmit=async e=>{e.preventDefault();setError(null);if(!validateForm()){return;}setIsLoading(true);try{const success=await signup(email,username,password);if(!success){throw new Error('Signup failed. Please try again.');}// Double check authentication state before proceeding\nconst token=localStorage.getItem('token');const tokenExpiry=localStorage.getItem('token_expiry');if(!token||!tokenExpiry){throw new Error('Authentication failed after signup. Please try logging in.');}// Navigation is handled by useAuth hook after successful signup\n}catch(error){console.error('Signup error:',error);setError(error instanceof Error?error.message:'Signup failed. Please try again.');// Clear any partial authentication state\nlocalStorage.removeItem('token');localStorage.removeItem('token_expiry');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(Card,{sx:{width:'100%'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,align:\"center\",children:\"Sign up for Lumix Trading\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Username\",value:username,onChange:e=>setUsername(e.target.value),margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),margin:\"normal\",required:true,helperText:\"Password must be at least 8 characters long\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",type:\"submit\",sx:{mt:3},disabled:isLoading,children:isLoading?'Signing up...':'Sign Up'}),/*#__PURE__*/_jsx(Box,{sx:{mt:2,textAlign:'center'},children:/*#__PURE__*/_jsx(Link,{href:\"/login\",variant:\"body2\",children:\"Already have an account? Login\"})})]})]})})})});};export default Signup;","map":{"version":3,"names":["React","useState","Box","Card","CardContent","TextField","Button","Typography","Container","Alert","Link","useAuthContext","jsx","_jsx","jsxs","_jsxs","Signup","signup","email","setEmail","username","setUsername","password","setPassword","error","setError","isLoading","setIsLoading","validateForm","test","length","handleSubmit","e","preventDefault","success","Error","token","localStorage","getItem","tokenExpiry","console","message","removeItem","maxWidth","children","sx","minHeight","display","alignItems","justifyContent","width","variant","gutterBottom","align","severity","mb","onSubmit","fullWidth","label","type","value","onChange","target","margin","required","helperText","mt","disabled","textAlign","href"],"sources":["/home/ubuntu/repos/tradingbot/src/frontend/src/pages/Signup.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Container,\n  Alert,\n  Link,\n} from '@mui/material';\nimport { useAuthContext } from '../hooks/useAuth';\n\nconst Signup: React.FC = () => {\n  const { signup } = useAuthContext();\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const validateForm = () => {\n    if (!email) {\n      setError('Email is required');\n      return false;\n    }\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n      setError('Please enter a valid email address');\n      return false;\n    }\n    if (!username) {\n      setError('Username is required');\n      return false;\n    }\n    if (username.length < 3) {\n      setError('Username must be at least 3 characters long');\n      return false;\n    }\n    if (!password) {\n      setError('Password is required');\n      return false;\n    }\n    if (password.length < 8) {\n      setError('Password must be at least 8 characters long');\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    setIsLoading(true);\n    try {\n      const success = await signup(email, username, password);\n      if (!success) {\n        throw new Error('Signup failed. Please try again.');\n      }\n      \n      // Double check authentication state before proceeding\n      const token = localStorage.getItem('token');\n      const tokenExpiry = localStorage.getItem('token_expiry');\n      \n      if (!token || !tokenExpiry) {\n        throw new Error('Authentication failed after signup. Please try logging in.');\n      }\n      \n      // Navigation is handled by useAuth hook after successful signup\n    } catch (error) {\n      console.error('Signup error:', error);\n      setError(error instanceof Error ? error.message : 'Signup failed. Please try again.');\n      // Clear any partial authentication state\n      localStorage.removeItem('token');\n      localStorage.removeItem('token_expiry');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Box\n        sx={{\n          minHeight: '100vh',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <Card sx={{ width: '100%' }}>\n          <CardContent>\n            <Typography variant=\"h5\" gutterBottom align=\"center\">\n              Sign up for Lumix Trading\n            </Typography>\n            \n            {error && (\n              <Alert severity=\"error\" sx={{ mb: 2 }}>\n                {error}\n              </Alert>\n            )}\n\n            <form onSubmit={handleSubmit}>\n              <TextField\n                fullWidth\n                label=\"Email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                margin=\"normal\"\n                required\n              />\n              <TextField\n                fullWidth\n                label=\"Username\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                margin=\"normal\"\n                required\n              />\n              <TextField\n                fullWidth\n                label=\"Password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                margin=\"normal\"\n                required\n                helperText=\"Password must be at least 8 characters long\"\n              />\n              <Button\n                fullWidth\n                variant=\"contained\"\n                type=\"submit\"\n                sx={{ mt: 3 }}\n                disabled={isLoading}\n              >\n                {isLoading ? 'Signing up...' : 'Sign Up'}\n              </Button>\n              <Box sx={{ mt: 2, textAlign: 'center' }}>\n                <Link href=\"/login\" variant=\"body2\">\n                  Already have an account? Login\n                </Link>\n              </Box>\n            </form>\n          </CardContent>\n        </Card>\n      </Box>\n    </Container>\n  );\n};\n\nexport default Signup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}